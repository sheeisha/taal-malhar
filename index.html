<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="This year at Malhar, we hope to provide opportunities for pupils to realise and exceed their full potential. The sky is not the limit; we can transcend together."
    />

    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"
    />

    <meta name="author" content="Malhar Computers Team" />
    <meta name="og:title" content="Malhar'22" />
    <meta
      name="og:description"
      content="Malhar is the inter-collegiate festival of
    St. Xavier's College (Autonomous), Mumbai"
    />
    <meta name="og:url" content="https://www.facebook.com/Malharfest" />
    <meta name="og:site_name" content="https://www.facebook.com/Malharfest" />

    <title>Taal</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;500;600;700;800;900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://api.fontshare.com/v2/css?f[]=clash-display@400,300&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://api.fontshare.com/v2/css?f[]=clash-grotesk@200,400,600,300,500&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Overpass:wght@600&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Spectral:wght@300&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Krona+One&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Khula:wght@800&family=Overpass+Mono:wght@300;400&family=Overpass:wght@900&display=swap"
      rel="stylesheet"
    />

    <!-- font-awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"
    />

    <!-- favicons i guess -->
    <link rel="shortcut icon" href="../../images/favicon.png" type="image/x-icon" />


    <!-- Navbar imports -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/foundation/6.2.0/foundation.min.css"
    />
    <link
      rel="stylesheet"
      href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css"
    />

    <!-- CSS -->
    <link rel="stylesheet" href="./style.css" />

    <!-- Favicon -->
    <link
      rel="shortcut icon"
      href="../../images/favicon.png"
      type="image/x-icon"
    />

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

    <!-- Some fucked-up JS idk -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript" src="./script.js"></script>
    <script src=""></script>

    <style></style>
  </head>

  <body style="overflow-x: hidden">
    <!-- skip links -->
    <a href="#maincontent" class="SkipLinkText">Skip to main Content </a>

    <!-- NAVBAR -->
    <nav id="nav" class="navbar">
      <div class="max-width">
        <ul class="menu">
          <li>
            <a
              href="../../index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Home</a
            >
          </li>
          <li>
            <a
              href="../results/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Results</a
            >
          </li>
          <li>
            <a
              href="https://linktr.ee/malharfest"
              class="menu-btn hover-underline-animation close_nav"
              >Announcements</a
            >
          </li>
          
          <li>
            <a
              href="../events/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Events</a
            >
          </li>

          <li>
            <a
              href="../conclave/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Conclave</a
            >
          </li>
          <li>
            <a
              href="https://blog.malharfest.in"
              class="menu-btn hover-underline-animation close_nav"
              >Blog</a
            > 
          </li>
          <li>
            <a
              href="../sponsors/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Sponsors</a
            >
          </li>
          <li>
            <a
              href="../workforce/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Workforce</a
            >
          </li>
          <li>
            <a
              href="../contact/index.html"
              class="menu-btn hover-underline-animation close_nav"
              >Contact</a
            >
          </li>
        </ul>
        <div class="menu-btn">
          <svg
            class="ham hamRotate ham4"
            viewBox="0 0 100 100"
            width="80"
            onclick="this.classList.toggle('active')"
          >
            <path
              class="line top"
              d="m 70,33 h -40 c 0,0 -8.5,-0.149796 -8.5,8.5 0,8.649796 8.5,8.5 8.5,8.5 h 20 v -20"
            />
            <path class="line middle" d="m 70,50 h -40" />
            <path
              class="line bottom"
              d="m 30,67 h 40 c 0,0 8.5,0.149796 8.5,-8.5 0,-8.649796 -8.5,-8.5 -8.5,-8.5 h -20 v 20"
            />
          </svg>
        </div>

        <!-- this may look stupid but do not touch it 
      (flexbox-related) -->
        <span class="nav-lol">ignore </span>
      </div>
    </nav>

    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->

    <main id="maincontent">
      <p role="alert" class="visually-hidden">
        Use Left and Right Arrow keys to navigate between pages in the flip
        book. Press ALT+P to hear the audio book
      </p>
      <div
        class="magazine"
        style="margin-bottom: 5%; position: relative"
        role="region"
        aria-label="magazine Flip Book"
      >
        <h1 class="taal-title">Taal</h1>
        <h2 class="taal-subtitle">Use the corners to navigate</h2>
        <!-- <figure><i>Use the corners to navigate</i></figure> -->

        <!--  magazine flipbook  -->
      
  <div class="scene">
    <article class="book">
    <section class="page active">
      <div class="front">
        <p><img src="https://placeimg.com/480/640/any?1"></p>
      </div>
      <div class="back">
        <p><img src="https://placeimg.com/480/640/any?2"></p>
      </div>    
    </section>
    <section class="page">
      <div class="front">
        <p><img src="https://placeimg.com/480/640/any?3"></p>
      </div>
      <div class="back">
        <p><img src="https://placeimg.com/480/640/any?4"></p>
      </div>    
    </section>
      <section class="page">
      <div class="front">
        <p><img src="https://placeimg.com/480/640/any?5"></p>
      </div>
      <div class="back">
        <p><img src="https://placeimg.com/480/640/any?6"></p>
      </div>    
    </section>
      <section class="page">
      <div class="front">
       <p><img src="https://placeimg.com/480/640/any?7"></p>
      </div>
      <div class="back">
        <p><img src="https://placeimg.com/480/640/any?8"></p>
      </div>    
    </section>
      <section class="page">
      <div class="front">
        <p><img src="https://placeimg.com/480/640/any?9"></p>
      </div>
      <div class="back">
        <p><img src="https://placeimg.com/480/640/any?10"></p>
      </div>    
    </section>
  </article>
  </div>
 
<!---->    
     
      <!-- audiobook  -->
      <div
        class="audiobook"
        style="position: relative"
        role="region"
        aria-label="magazine audiobook"
      >
        <h1 class="audiobook-title">Taal Audiobook</h1>
        <!-- Audio player -->
        <div class="player">
          <audio class="player__audio viewer">
            <source
              src="./audio/Taal 22.final final.mp3"
              type="audio/mpeg"
              data-trackid="1"
            />
            <p role="alert">Your browser does not support the audio element.</p>
          </audio>
          <div class="song-panel">
            <div class="song-info">
              <div class="song-info__title">Taal Audiobook</div>
              <div class="song-info__artist">Malhar'23</div>
              <div
                class="progress"
                role="progressbar"
                aria-valuemin="0"
                aria-valuemax="100"
              >
                <div class="progress__filled"></div>
              </div>
            </div>
          </div>
          <div class="player-controls">
            <div class="spinner">
              <div
                class="spinner__disc"
                style="background-image: url(./images/Taal_final_1-1-1.png)"
              >
                <div class="center__disc"></div>
              </div>
            </div>
            <button class="backward">
              <i
                class="fas fa-backward fa-2x"
                title="Start from beginning"
                aria-label="Start from beginning"
              ></i>
            </button>
            <button class="play" title="Play/Pause (ALT+P)" aria-label="Play">
              <i class="fas fa-play fa-3x"></i>
              <span class="pause left"></span>
              <span class="pause right" accesskey="p" title="ALT+P"></span>
            </button>
            <button
              title="Fast Forward"
              aria-label="Fast Forward"
              class="forward"
              style="opacity: 0; visibility: hidden"
            >
              <i class="fas fa-forward fa-2x"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- footnote  -->
      <div class="footnote">
        <div class="copyright">
          <figure>
            Santoor and Tabla at Assi Ghat, Varanasi by Samuel Corwin |
            https://freemusicarchive.org/music/Samuel_Corwin Music promoted by
            https://www.chosic.com/free-music/all/ Creative Commons CC BY 4.0
            https://creativecommons.org/licenses/by/4.0/
          </figure>
        </div>
      </div>
    </main>

    <!-- JS -->
    <!-- Navbar JS  -->
    <script type="text/javascript">
      //-----------------------------------
      // NAVBAR -------
      //-----------------------------------
      $(document).ready(function () {
        $(window).scroll(function () {
          // sticky navbar on scroll script
          if (this.scrollY > 20) {
            $(".navbar").addClass("sticky");
          } else {
            $(".navbar").removeClass("sticky");
          }
        });

        $(".navbar .menu li a").click(function () {
          // applying again smooth scroll on menu items click
          $("html").css("scrollBehavior", "smooth");
        });

        // toggle menu/navbar script
        $(".menu-btn").click(function () {
          $(".navbar .menu").toggleClass("active");
          $(".menu-btn i").toggleClass("active");
          console.log("open executed");
        });

        $(".close_nav").click(function () {
          $(".navbar .menu").removeClass("active");
          $(".ham").removeClass("active");
          // console.log("executed close");
          // window.location.reload();
        });
      });

      setTimeout(function () {
        document.querySelector(".navbar").style.visibility = "visible";
      }, 0);
    </script>
    <!-- Flipbook JS  -->
    <script type="text/javascript">
      // for iphone SE and small af devices
      if ($(window).width() < 321) {
        turn = new TurnJS(".flipbook", {
          display: "single",

          acceleration: true,

          // Width
          width: 270,
          // Height
          height: 430,
          // Elevation
          elevation: 50,
          // Enable gradients
          gradients: true,
          // Auto center this flipbook
          autoCenter: true,
        });
      }

      // for large mobiles
      else if ($(window).width() > 321 && $(window).width() < 501) {
        turn = new TurnJS(".flipbook", {
          display: "single",

          acceleration: true,

          // Width
          width: 351,
          // Height
          height: 500,
          // Elevation
          elevation: 50,
          // Enable gradients
          gradients: true,
          // Auto center this flipbook
          autoCenter: true,
        });
      }

      // for desktop
      else {
        turn = new TurnJS(".flipbook", {
          display: "single",

          acceleration: true,

          // Width
          width: 550,
          // Height
          height: 750,
          // Elevation
          elevation: 50,
          // Enable gradients
          gradients: true,
          // Auto center this flipbook
          autoCenter: true,
        });
      }

      $(window).bind("keydown", function (e) {
        if (e.keyCode == 37) $(".flipbook").turn("previous");
        else if (e.keyCode == 39) $(".flipbook").turn("next");
      });
    </script>
    <!-- Audiobook JS  -->
    <script type="text/javascript">
      /* TODO:- ADD timer (currentTime and duration)*/

      const tracks = [
        {
          id: "1",
          title: "Ukulele",
          artist: "Bensound",
          src: "https://www.bensound.com/bensound-music/bensound-ukulele.mp3",
          cover: "https://www.bensound.com/bensound-img/ukulele.jpg",
        },
      ];
      const player = document.querySelector(".player");
      const audio = player.querySelector(".player__audio");
      const audioSource = audio.querySelector("source");
      const songPanel = player.querySelector(".song-panel");
      const songTitle = player.querySelector(".song-info__title");
      const songArtist = player.querySelector(".song-info__artist");
      const backButton = player.querySelector(".backward");
      const playButton = player.querySelector(".play");
      const forwardButton = player.querySelector(".forward");
      const spinner = player.querySelector(".spinner");
      const spinnerDisc = player.querySelector(".spinner__disc");
      const progress = player.querySelector(".progress");
      const progressBar = player.querySelector(".progress__filled");

      let playing = false;
      let trackSwitch = false;

      const togglePlay = () => {
        // Play / pause the audio
        const method = audio.paused ? "play" : "pause";
        playing = audio.paused ? true : false;
        audio[method]();
      };

      const toggleSongPanel = () => {
        if (!trackSwitch) {
          // Scale the disc
          spinnerDisc.classList.toggle("scale");

          // Show / hide song panel
          songPanel.classList.toggle("playing");

          // Change button icon
          playButton.classList.toggle("playing");
        }
      };

      const startSpin = () => {
        // Start spinning the disc
        spinner.classList.add("spin");
      };

      const stopSpin = () => {
        // Stop spinning the disc
        const spin = document.querySelector(".spin");
        spin.addEventListener(
          "animationiteration",
          () => {
            if (!playing) {
              spin.style.animation = "none";
              spinner.classList.remove("spin");
              spin.style.animation = "";
            }
          },
          {
            once: true,
          }
        );
      };

      const handleProgress = () => {
        // Update the progress bar.
        const percent = (audio.currentTime / audio.duration) * 100;
        progressBar.style.flexBasis = `${percent}%`;

        // Skip to next track if at the end of the song.
        if (percent === 100) {
          trackSwitch = true;
          handleForwardButton();
        }
      };

      const handleBackButton = () => {
        if (audio.currentTime <= 3) {
          const currentTrackId = parseInt(audioSource.dataset.trackid);
          const previousTrackId =
            currentTrackId === 1 ? "10" : (currentTrackId - 1).toString();
          const previousTrack = tracks.find((o) => o.id === previousTrackId);
          changeTrack(previousTrack);
        } else {
          audio.currentTime = 0;
        }
      };

      const handleForwardButton = () => {
        const currentTrackId = parseInt(audioSource.dataset.trackid);
        const nextTrackId =
          currentTrackId === 10 ? "1" : (currentTrackId + 1).toString();
        const nextTrack = tracks.find((o) => o.id === nextTrackId);
        changeTrack(nextTrack);
      };

      const changeTrack = (track) => {
        if (playing) trackSwitch = true;
        audioSource.setAttribute("src", track.src);
        audioSource.dataset.trackid = track.id;
        songTitle.innerHTML = track.title;
        songArtist.innerHTML = track.artist;
        spinnerDisc.style.backgroundImage = `url(${track.cover})`;
        audio.load();
        if (playing) {
          audio.addEventListener(
            "canplay",
            () => {
              audio.play();
            },
            {
              once: true,
            }
          );
          audio.addEventListener(
            "play",
            () => {
              trackSwitch = false;
            },
            {
              once: true,
            }
          );
        }
      };

      function scrub(e) {
        const scrubTime = (e.offsetX / progress.offsetWidth) * audio.duration;
        audio.currentTime = scrubTime;
      }

      audio.addEventListener("play", startSpin);
      audio.addEventListener("play", toggleSongPanel);
      audio.addEventListener("pause", stopSpin);
      audio.addEventListener("pause", toggleSongPanel);
      audio.addEventListener("timeupdate", handleProgress);

      backButton.addEventListener("click", handleBackButton);
      playButton.addEventListener("click", togglePlay);
      forwardButton.addEventListener("click", handleForwardButton);

      let mousedown = false;
      progress.addEventListener("click", scrub);
      progress.addEventListener("mousemove", (e) => mousedown && scrub(e));
      progress.addEventListener("mousedown", () => (mousedown = true));
      progress.addEventListener("mouseup", () => (mousedown = false));
    </script>
    <script src="./script.js"></script>
  </body>

</html>
